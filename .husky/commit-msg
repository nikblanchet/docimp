#!/usr/bin/env sh
# commit-msg hook: Reject forbidden emojis in commit messages
#
# This is a global hook (committed to repo) that applies to all contributors.
# Rejects commits containing unprofessional emojis commonly added by AI tools.
#
# To bypass this check temporarily (for emergencies):
#   git commit --no-verify

commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

# Forbidden emojis (commonly added by AI tools)
if printf '%s' "$commit_msg" | grep -qE '[ğŸ¤–âœ…âŒğŸš€ğŸš«âœ¨â¤ï¸]'; then
    echo ""
    echo "COMMIT REJECTED"
    echo ""
    echo "Commit message contains forbidden emoji."
    echo "Please remove emojis from your commit message."
    echo ""
    exit 1
fi

# Call local hook if it exists (for personal/machine-specific rules)
GIT_COMMON_DIR=$(git rev-parse --git-common-dir)
if [ -x "$GIT_COMMON_DIR/hooks/commit-msg" ]; then
    "$GIT_COMMON_DIR/hooks/commit-msg" "$@"
fi
